<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>homepage</title>
    <link rel="stylesheet" type="text/css" href="css/common/common.css">
    <script src="js/jquery/jquery-3.1.1.min.js" type="text/javascript"></script>
    <script src="js/echarts/echarts.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    </script>
</head>

<body>
    <div class="w_top">
        <span id="w_New" class="w_new">新建</span>
    </div>
    <div id="w_Main" class="w_main">
        <!-- <div id="mess" class="w_box">
            <div class="w_boxMain">
                <div class="w_boxMess">
                    <p>信息展示</p>
                    <div id="1" class="w_boxEchart"></div>
                </div>
                <div class="w_boxTop"></div>
                <div class="w_boxRight"></div>
                <div class="w_boxBottom"></div>
                <div class="w_boxLeft"></div>
                <div class="w_boxRightBottom"></div>
            </div>
        </div> -->
    </div>


    <script type="text/javascript">
        //动态绑定点击事件
        var bindClick = (dom, fn) => {
            dom.addEventListener('click', debounce(fn), true);
        }


        // 防抖处理
        function debounce(fn) {
            let timer = null;
            return function() {
                clearTimeout(timer);
                timer = setTimeout(() => fn.call(this, arguments), 500);
            }
        }

        bindClick(w_New, createDom)

        function createDom() {
            let times = new Date().getTime();
            let w_box_id = 'w_dom-' + times;
            let w_boxEchart_id = 'w_boxEchart-' + times;
            let w_boxTop_id = 'w_boxTop-' + times;
            let w_boxRight_id = 'w_boxRight-' + times;
            let w_boxBottom_id = 'w_boxBottom-' + times;
            let w_boxLeft_id = 'w_boxLeft-' + times;
            let w_boxRightBottom_id = 'w_boxRightBottom-' + times;

            let html = `<div id="${w_box_id}" class="w_box">
            <div class="w_boxMain">
                <div class="w_boxMess">
                    <p>信息展示</p>
                    <div id="${w_boxEchart_id}" class="w_boxEchart"></div>
                </div>
                <div id="${w_boxTop_id}" class="w_boxTop"></div>
                <div id="${w_boxRight_id}" class="w_boxRight"></div>
                <div id="${w_boxBottom_id}" class="w_boxBottom"></div>
                <div id="${w_boxLeft_id}" class="w_boxLeft"></div>
                <div id="${w_boxRightBottom_id}" class="w_boxRightBottom"></div>
            </div>
        </div>`

            w_Main.innerHTML += html;
            controlTop(document.getElementById(w_boxTop_id));
        }


        var dom_obj = {

        }

        //控制盒子大小
        function controlTop(dom) {
            dom.onmousedown = (ev) => {
                var _event = ev || event;

                var id = dom.id;
                if (!dom_obj[id]) {
                    dom_obj[id] = {};
                }
                dom_obj[id].mouseTop = _event.clientY;
                dom_obj[id].offsetTop = dom.offsetTop;
                dom_obj[id].top = _event.clientY - dom.offsetTop;
                console.log(dom_obj)

                if (dom.setCapture) {
                    dom.onmouseMove = dragTopMove;
                    dom.onmouseUp = dragUp;
                    dom.setCapture();
                } else {
                    document.addEventListener('mousemove', dragTopMove, true);
                    document.addEventListener('mouseup', dragTopUp, true);
                }
            }

            // 控制上的方法
            var dragTopMove = (ev) => {
                var _event = ev || event;

            }

            // 控制上抬起
            var dragTopUp = (ev) => {
                var _event = ev || event;

            }

            // var drag


        }
    </script>

</body>

</html>